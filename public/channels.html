<div ng-controller="ChannelsController">
	<md-content class="md-padding">
		<p>Find music by genre or tags:</p>
		<md-input-container class="md-block" flex-gt-xs>
			<label>Genre(s)</label>
			<md-icon class="material-icons">&#xE152;</md-icon>
			<md-select ng-model="searchGenres" multiple>
				<md-option ng-repeat="genre in genres" value="{{ genre }}">
					{{ genre }}
				</md-option>
			</md-select>
		</md-input-container>

		<md-input-container class="md-block" flex-gt-xs>
			<label>Tags</label>
			<md-icon class="material-icons">&#xE893;</md-icon>
			<input ng-model="searchTagString" ng-change="searchTags = searchTagString.split(' ')" placeholder="#synthpop #newwave">
		</md-input-container>
	</md-content>

	<md-content layout-padding>
    	<div class='md-padding' layout="row" layout-wrap>
    		<div ng-repeat="track in tracks">
				<md-card style="width: 700px;" ng-if="(searchGenres.length === 0 || match(searchGenres,track.genres)) && (searchTags.length === 0 || match(searchTags, track.tags))">
		            <md-card-header>
		                <md-card-header-text>
		                    <h2 class="md-title"><b>Genre<span ng-if="track.genres.length != 1">s</span>:</b> {{ track.genres.toString().replace(",", ", ") }}</h2>
		                </md-card-header-text>
		            </md-card-header>
		            <!-- <img ng-src="{{ imagePath }}" class="md-card-image" alt="Washed Out"> -->
		            <iframe 
		            	ng-if="track.link.includes('youtu')" 
		            	ng-src="{{ track.link | trusted }}" 
		            	width="100%" 
		            	height="50%" 
		            	frameborder="0"
		            	ng-click="play(track)">	
	            	</iframe>
		            <iframe 
		            	ng-if="track.link.includes('soundcloud')" 
		            	width="100%" 
		            	height="300" 
		            	scrolling="no" 
		            	frameborder="no" 
		            	ng-src="{{ track.link | trusted }}"
		            	ng-click="play(track)">		
	            	</iframe>
		            <iframe 
			            ng-if="track.link.includes('spotify')" 
			            src="{{ track.link | trusted }}" 
			            width="100%" 
			            height="380" 
			            frameborder="0" 
			            allowtransparency="true"
			            ng-click="play(track)">
		            </iframe>
		            <md-card-title>
		                <md-card-title-text>
		                    <span class="md-headline"><b>{{ track.artist }} - </b>{{ track.name }}</span>
		                    <span class="md-subhead"><b ng-if="track.album">Album:</b> {{ track.album }}</span>
		                </md-card-title-text>
		            </md-card-title>
		            <md-card-actions layout="row" layout-align="start center">
		                <span ng-if="track.explicit" style="color: red">EXPLICIT</span>
		                <!-- <md-card-icon-actions>
		                    <md-button class="md-icon-button" aria-label="toggle">
		                        <md-icon md-svg-icon="md-toggle-arrow"></md-icon>
		                    </md-button>
		                </md-card-icon-actions> -->
		            </md-card-actions>
		            <md-card-content>
		            	<p>Tags: <b class="md-blue">{{ hashify(track.tags) || '--' }}</b></p>
		            </md-card-content>
		        </md-card>
    		</div>
	    </div>
	</md-content>
</div>